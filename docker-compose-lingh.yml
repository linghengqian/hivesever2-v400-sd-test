services:
  zookeeper-server:
    image: zookeeper:3.8.3-jre-17
    restart: always
    ports:
      - "2181:2181"
  hive-server2:
    image: apache/hive:4.0.0
    restart: always
    # This is a small operation for the docker network in the local environment.
    # This is not necessary in a non-VM or non-container environment.
    # Because ( HiveServer2 hostname + `:10000`) will be stored in zookeeper server.
    hostname: '127.0.0.1'
    depends_on:
      zookeeper-server:
        condition: service_started
    environment:
      SERVICE_NAME: hiveserver2
      HIVE_CUSTOM_CONF_DIR: /hive_custom_conf
    ports:
      - "10000:10000"
      - "10002:10002"
    volumes:
      - ./hive-custom-conf:/hive_custom_conf